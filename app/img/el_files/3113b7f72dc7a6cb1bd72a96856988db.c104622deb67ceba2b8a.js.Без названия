(window.webpackJsonp=window.webpackJsonp||[]).push([["bundles/3113b7f72dc7a6cb1bd72a96856988db"],{QySK:function(t,e,o){"use strict";var i=window;i.each,i.intval;var n=o("sWID");function r(t,e){var o=domQuery1("[data-sizes]",t),i=JSON.parse(domData(o,"sizes")),n=(domData(o,"media-links")||"").split(",");if(!(i.length<=1||domData(t,"carousel-inited"))){if(domData(t,"carousel-inited",1),e.mobile)return function(t,e){var o=geByClass1("article_photo_carousel__controls",e),i=geByClass1("article_photo_carousel__counter",e),n=domData(i,"counter-lang")||getLang("global_article_carousel_counter"),r=getSize(geByClass1("article_figure_content",e)),s=geByClass1("article_photo_carousel_inner",e),c=0,l=0,u=void 0,d=void 0,h=!1,f=void 0,_=0,p=!1,v=!1;o.addEventListener("touchstart",function(t){d=t.touches[0].pageX,u=t.touches[0].pageY,addClass(s,"--no_trans"),h=!0,clearTimeout(f)});var g=!1,b=void 0;function m(o,l,u){if(!l||!h){if(h=!0,l)return s.style.transform="translateX(-50px)",void(f=setTimeout(function(){s.style.transform="translateX(0px)"},700));clearTimeout(f),c=void 0===c?Math.min(t.length-1,Math.max(0,c+o)):u,domData(e,"photo-carousel-index",c),a(c,e),i.innerHTML=n.replace("{counter}",c+1).replace("{total}",t.length),s.style.transform="translateX(-"+c*r[0]+"px)"}}return o.addEventListener("touchmove",function(e){if(v||!(Math.abs(e.touches[0].pageY-u)>5||p)){if(l=e.touches[0].pageX-d,!(Math.abs(l)<10)||g){v||window.addEventListener("touchmove",b=function(t){return cancelEvent(t)},{passive:!1}),v=!0,g=!0;var o=Math.min(t.length-1,Math.max(0,c+(l<0?1:-1))),i=0===o&&0===c,n=o===t.length-1&&c===t.length-1;_=o;var a=-c*r[0];a+=i||n?.2*l:l,s.style.transform="translateX("+a+"px)"}}else p=!0}),o.addEventListener("touchend",function(){g=!1,p=!1,v=!1,removeClass(s,"--no_trans"),b&&window.removeEventListener("touchmove",b),Math.abs(l)<50||(c=_),m(0,!1,_)}),m}(i,t);var r=function(t,e,o,i){var n=0,r=geByClass1("article_photo_carousel__controls",e),s=geByClass1("article_photo_carousel__counter",e),c=domData(s,"counter-lang")||getLang("global_article_carousel_counter"),l=getSize(geByClass1("article_figure_content",e)),u=geByClass1("article_photo_carousel_inner",e),d=geByClass1("article_photo_carousel__left",e),h=geByClass1("article_photo_carousel__right",e),f=void 0,_=!1;function p(r,p){if(!p||!_){if(_=!0,p)return u.style.transform="translateX(-50px)",void(f=setTimeout(function(){u.style.transform="translateX(0px)"},700));clearTimeout(f),n=Math.min(t.length-1,Math.max(0,n+r));if(o.moderDeletePhoto){var v=i[n];'<a href="'+v+'" target="_blank" rel="noopener" class="flat_button article_photo_moder_open">Открыть</a>'}u.style.transform="translateX(-"+n*l[0]+"px)",s.innerHTML=c.replace("{counter}",n+1).replace("{total}",t.length),toggle(d,n>0),toggle(h,n<t.length-1),domData(e,"photo-carousel-index",n),a(n,e)}}return h.addEventListener("click",function(t){return p(1),cancelEvent(t)}),d.addEventListener("click",function(t){return p(-1),cancelEvent(t)}),e.addEventListener("mousemove",function(){r.style.opacity=1}),e.addEventListener("mouseleave",function(){r.style.opacity=0}),p}(i,t,e,n);return data(t,"changePhotoFunction",r),r}}function a(t,e){var o=geByTag1("figcaption",e),i=[];o&&((i=domData(o,"captions"))&&(i=JSON.parse(i)),o.innerHTML=i[t]||"")}var s=o("lkNA"),c=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var o=[],i=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(o.push(a.value),!e||o.length!==e);i=!0);}catch(t){n=!0,r=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw r}}return o}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var l=window,u=l.geByTag,d=l.geByTag1,h=l.each,f=l.removeClass,_=l.intval,p=l.toggleClass,v=l.domData,g=l.domQuery1,b=l.getW,m=l.getXY,w=l.getH,y=l.geByClass,j=l.ge,O={},S=void 0,E=void 0,T=void 0;window._articleCarouselGlobalId=window._articleCarouselGlobalId||1;var L=function(){function t(e,o,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._article=e,this._options=o,this._readTO=null,this._scrollStatEvent=!1,this._els={view:j("article_view_"+e.raw_id)},window.cur&&cur.destroy&&cur.destroy.push(function(){n.deinit()}),window.cur&&cur.destroy.push(function(){n.deinit()}),window.addEventListener("VKWebAppEvent",function(t){if(t&&t.detail&&void 0!==t.detail.index){var e=t.detail.index;if(T){var o=O[v(T,"id")];o&&o(e)}}}),i&&this.ready()}return t.prototype.getEl=function(){return this._els.view},t.prototype.getArticle=function(){return this._article},t.prototype.getScrollNode=function(){return this._options.getScrollNode?this._options.getScrollNode():document},t.prototype._getScrollTop=function(){return this._options.getScrollTop?this._options.getScrollTop():window.scrollNode?window.scrollNode.scrollTop:window.document.documentElement.scrollTop},t.prototype.deinit=function(){this._scrollEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollEvent),this._scrollEvent=!1),this._scrollStatEvent&&(this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),this._scrollStatEvent=!1),clearTimeout(this._readTO)},t.prototype._onViewScroll=function(){var t=this,e=this._options.mobile?scrollGetY():window.scrollNode.scrollTop,o=window.innerHeight;h(u("figure",this._els.view),function(i,n){var r=_(v(n,"done"));if(!r){var a=w(n),s=m(n)[1],c=_(v(n,"type")),l=101==c?-200:100,u=s<=e+o-l&&e+l<=s+a;(r=t._onObjectView(u,c,n))&&v(n,"done",1)}}),h(u("figure",this._els.view),function(i,n){var r=w(n),a=m(n)[1],s=_(v(n,"type")),c=a,l=a+r,u=e,d=e+o,h=void 0;if(c>d||u>l)h=!1;else{var f=Math.max(c,u);h=(Math.min(l,d)-f)/r>.7}t._onObjectPartialView(h,s,n)})},t.prototype._initObjects=function(){var t=this;this._initedObjects=this._initedObjects||{},h(y("_article_unmute_button",this._els.view),function(e,o){t._initedObjects[e]||(t._initedObjects[e]=!0,o.addEventListener("click",function(){var t=o.parentNode,e=d("video",t);e.muted=!e.muted,p(t,"article_object_unmuted",!e.muted)}))}),h(u("figure",this._els.view),function(e,o){if(!t._initedObjects[e]&&(t._initedObjects[e]=!0,parseInt(v(o,"type"))==n.b.ObjectPhoto)){var i=r(o,t._options);if(t._initPhoto(o),i){var a=window._articleCarouselGlobalId++;o.setAttribute("data-carousel-id",a),O[a]=i}}})},t.prototype._initPhoto=function(t){var e=this;geByClass1("article_figure_content",t).addEventListener("click",function(){var o=g("[data-sizes]",t),i=JSON.parse(v(o,"sizes")),n=_(v(t,"photo-carousel-index"));e._options.onImageOpen&&e._options.onImageOpen.call(e,i,t,n)})},t.prototype._initStats=function(){if(this._statsInited)this._scrollStatEvent&&this._scrollStatEvent();else{this._statsInited=!0;var t=Date.now(),e=-1,o=void 0,i=[];this._scrollStatEvent&&this.getScrollNode().removeEventListener("scroll",this._scrollStatEvent),clearTimeout(this._readTO);var r=this;this.getScrollNode().addEventListener("scroll",this._scrollStatEvent=function(){var t=r.getCurrentScrollRatio();if(!(t<0)){var n=1;t>=.95?n=4:t>.66?n=3:t>.33&&(n=2),function(t){if(r._isReady&&(r._article.has_more&&(t=Math.min(t,1)),!(e>=t))){for(var n=e+1;n<=t;n++)i.push(n);if(e=t,clearTimeout(o),o=setTimeout(s,300),3==t&&r._article.ttr){var c=r._article.ttr-a();c>0&&(r._readTO=setTimeout(function(){if(!document.hidden){var t=r.getCurrentScrollRatio();if(!(t<0||t>1.3)){var o=4==e;i=[e=4],s(o)}}},1e3*c))}}}(n),4!=n||r._article.has_more||(r.getScrollNode().removeEventListener("scroll",r._scrollStatEvent),r._scrollStatEvent=!1)}},{passive:!0}),this._scrollStatEvent&&this._scrollStatEvent()}function a(){return Math.round((Date.now()-t)/1e3)}function s(t){if(i.length){var e=r._article,o=r._options,s={act:"stats",scroll:i.join(","),spent:a(),hash:e.access_hash,article_owner_id:e.owner_id,article_id:e.id,is_web_view:o.isWebView?1:0,post_id:o.sourcePostId,ref:window.cur?window.cur.module:"",is_widget:o.isWidget,is_delayed_scroll_4:_(t),track_code:o.trackCode};ajax.post(o.mobile?"article.php":"al_articles.php",s),e.mailru_stats_data&&i.forEach(function(t){Object(n.g)("scroll_"+t,e.mailru_stats_data)}),i=[]}}},t.prototype._initGoogleAnalytics=function(){var t=this._options.googleAnalyticsId;if(t)if(window.dataLayer=window.dataLayer||[],window.gtag)gtag("config",t,{page_location:window.location.href});else{var e=document.createElement("script");e.setAttribute("src","https://www.googletagmanager.com/gtag/js?id="+t),e.setAttribute("async","true"),document.head.appendChild(e),window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",t)}},t.prototype._onObjectPartialView=function(t,e,o){if(e==n.b.ObjectPhoto){var i=g("[data-sizes]",o);if(JSON.parse(v(i,"sizes")).length>1){var r=o.getAttribute("data-carousel-id");t?E!=r&&(clearTimeout(S),S=setTimeout(function(){var t=O[r];t&&t(1,!0)},400),E=r):r==E&&(E=-1,clearTimeout(S))}}},t.prototype._onObjectView=function(t,e,o){var i=!1;switch(e){case n.b.ObjectPhoto:if(t){var r=d("img",o),a=b(r)||this._options.width,s=g("[data-sizes]",o),l=JSON.parse(v(s,"sizes")),h=u("img",o);l.forEach(function(t,e){var o=Object(n.e)(l[e],a,!0),i=c(o,1)[0];Object(n.h)(i,function(){var t=h[e];f(t,"article_object_photo__image_blur"),t.src=i})}),i=!0}break;case n.b.ObjectGIF:if(!this._options.mobile){var _=d("video",o);if(_)if(t){if(_.hasAttribute("autoplay")){var p=_.play();p&&p.catch(function(){})}}else _.pause();else i=!0}break;case n.b.ObjectTwitter:case n.b.ObjectFacebook:case n.b.ObjectInstagram:case n.b.ObjectVK:case n.b.ObjectTelegram:this.initEmbed(e,o),i=!0}return i},t.prototype.initEmbed=function(t,e){switch(t){case n.b.ObjectTwitter:var o=g("[data-tweet-id]",e),i=v(o,"tweet-id");Object(s.a)("https://platform.twitter.com/widgets.js",{onLoad:function(){twttr.widgets.createTweet(i,o,{align:"center",lang:window.vk&&0==window.vk.lang?"ru":"en",dnt:!0})}});break;case n.b.ObjectFacebook:var r=window.vk&&0==window.vk.lang?"ru_RU":"en_US";Object(s.a)("https://connect.facebook.net/"+r+"/all.js#xfbml=1&amp;version=v2.8",{onLoad:function(){FB.XFBML.parse()}});break;case n.b.ObjectInstagram:Object(s.a)("https://www.instagram.com/embed.js",{onLoad:function(){window.instgrm.Embeds.process(),addEvent(window,"message",n.d)}});break;case n.b.ObjectVK:var a=g("[data-raw-id]",e),l=v(a,"raw-id"),u=v(a,"index"),d=l.split(";"),h=c(d,2),f=h[0],_=h[1];Object(s.a)("/js/api/openapi.js",{onLoad:function(){ajax.post("dev.php",{act:"a_get_post_hash",post:f+"_"+_},{onDone:function(t){t&&window.VK&&window.VK.Widgets&&window.VK.Widgets.Post("vk_post_"+l+"_"+u,f,_,t)}})}});break;case n.b.ObjectTelegram:Object(s.a)("https://telegram.org/js/telegram-widget.js?5",{})}},t.prototype.getCurrentScrollRatio=function(){var t=w(this._els.view),e=m(this._els.view)[1]-m(this.getScrollNode().firstElementChild)[1];return(this._getScrollTop()+window.innerHeight-e)/t},t.prototype.getScreenVisibilityRatio=function(){var t=w(this._els.view),e=m(this._els.view)[1]-m(this.getScrollNode().firstElementChild)[1],o=this._getScrollTop(),i=window.innerHeight,n=e,r=e+t,a=o,s=o+i;if(a>r||n>s)return 0;var c=Math.max(n,a);return(Math.min(r,s)-c)/i},t.prototype.update=function(){this._initObjects(),this._initStats(),this._options.onScroll&&this._options.onScroll.call(this,this.getCurrentScrollRatio())},t.prototype.ready=function(){var t=this;(this._isReady=!0,this._initObjects(),this._initStats(),this._initGoogleAnalytics(),setTimeout(function(){var e=Object(n.f)("anchor");if(e){t._options.isWebView||t.scrollToAnchor(e);var o=t.getScrollNode();o.click&&o.click(),o.focus()}},0),!this._options.mobile&&window.AudioPlaylist)&&(this._article.audios_list&&this._article.audios_list.length>0&&new AudioPlaylist(AudioPlaylist.TYPE_TEMP,this._article.owner_id,"article_"+this._article.id).mergeWith({list:this._article.audios_list}));this.getScrollNode().addEventListener("scroll",this._scrollEvent=function(){t._onViewScroll(),t._options.onScroll&&t._options.onScroll.call(t,t.getCurrentScrollRatio())}),setTimeout(function(){t._scrollEvent()},this._options.objectsInitDelay||0)},t.prototype.scrollToAnchor=function(t){t=t||Object(n.f)("anchor");var e=this.getScrollNode(),o=this._options;t&&function(){var i=document.getElementById(t);if(i){"scrollRestoration"in history&&(history.scrollRestoration="manual");var n=o.isWebView?0:25,r=i.parentNode.parentNode.offsetTop-n;window.setTimeout(function(){browser.msie&&!e.scrollTo?e.scrollTop=r:e.scrollTo(0,r)},0)}}()},t}();e.a=L},sWID:function(t,e,o){"use strict";o.d(e,"b",function(){return n}),o.d(e,"c",function(){return r}),o.d(e,"a",function(){return a}),o.d(e,"e",function(){return c}),o.d(e,"h",function(){return u}),o.d(e,"g",function(){return d}),o.d(e,"f",function(){return h}),o.d(e,"d",function(){return f});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={Text:1,Header1:2,Header2:3,Header3:4,Code:5,NumericList:6,BulletList:7,Quote:8,Quote2:9,ObjectAudioPlaylist:100,ObjectPhoto:101,ObjectVideo:102,ObjectGIF:103,ObjectPodcast:104,ObjectAudio:105,ObjectTwitter:106,ObjectFacebook:107,ObjectInstagram:108,ObjectVK:109,ObjectTelegram:110,ObjectPoll:111},r=[n.ObjectPhoto,n.ObjectGIF,n.ObjectVideo,n.ObjectTwitter,n.ObjectFacebook,n.ObjectInstagram,n.ObjectVK,n.ObjectTelegram],a={Normal:0,Float:1,Medium:2,Large:3};function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&!1===e.call(t[o],o,t[o]))break;return t}function c(t,e,o){var i=[];if(s(t,function(t,e){o&&-1==["w","z","y","x","m","s"].indexOf(t)||i.push(e)}),!i.length)return[!1];i.sort(function(t,e){return t[1]-e[1]}),e*=window.devicePixelRatio>=2?2:1;var n=i[i.length-1];return s(i,function(t,o){if(o[1]>=e)return n=o,!1}),n}var l={};function u(t,e){if(!0===l[t])return e&&e(),!0;if(isArray(l[t]))return l[t].push(e),!1;l[t]=[e];var o=new Image;return o.onload=function(){var e=l[t];l[t]=!0,s(e,function(t,e){e&&e()})},o.src=t,!1}function d(t,e){if(isObject(e)&&!isEmpty(e)){var o="https://vk-callback.go.mail.ru/longread_pxl?action="+t;s(e,function(t,e){o+="&"+t+"="+e}),(new Image).src=o}}function h(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}function f(t){if(/^https?:\/\/([\w-]+\.)*(instagram\.com|instagr\.am)$/.test(t.origin)){var e=function(t){for(var e=document.getElementsByTagName("iframe"),o=void 0,i=e.length-1;i>=0;i--){var n=e[i];if(n.contentWindow===t.source){o=n;break}}return o}(t);if(e){try{t=JSON.parse(t.data)}catch(t){}"object"==(void 0===t?"undefined":i(t))&&"string"==typeof t.type&&"object"==i(t.details)&&setTimeout(function(){if("MEASURE"===t.type){var o=t.details.height;e.setAttribute("height",o)}},100)}}}}}]);try{stManager.done("cmodules/bundles/3113b7f72dc7a6cb1bd72a96856988db.c104622deb67ceba2b8a.js")}catch(t){}